"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("vue"),t=require("./components.js"),j=require("./AppDarkModeToggle.js"),$=require("./usePage.js");var T=function(e,i){var c={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(c[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)i.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(c[o[u]]=e[o[u]]);return c};const A=()=>({prefixCls:String,href:String,separator:t.PropTypes.any,dropdownProps:t.objectType(),overlay:t.PropTypes.any,onClick:t.eventType()}),N=r.defineComponent({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:A(),slots:Object,setup(e,i){let{slots:c,attrs:o,emit:u}=i;const{prefixCls:m}=t.useConfigInject("breadcrumb",e),S=(b,h)=>{const g=t.getPropsSlot(c,e,"overlay");return g?r.createVNode(t.Dropdown$2,t._objectSpread2(t._objectSpread2({},e.dropdownProps),{},{overlay:g,placement:"bottom"}),{default:()=>[r.createVNode("span",{class:`${h}-overlay-link`},[b,r.createVNode(t.DownOutlined,null,null)])]}):b},v=b=>{u("click",b)};return()=>{var b;const h=(b=t.getPropsSlot(c,e,"separator"))!==null&&b!==void 0?b:"/",g=t.getPropsSlot(c,e),{class:s,style:l}=o,a=T(o,["class","style"]);let n;return e.href!==void 0?n=r.createVNode("a",t._objectSpread2({class:`${m.value}-link`,onClick:v},a),[g]):n=r.createVNode("span",t._objectSpread2({class:`${m.value}-link`,onClick:v},a),[g]),n=S(n,m.value),g!=null?r.createVNode("li",{class:s,style:l},[n,h&&r.createVNode("span",{class:`${m.value}-separator`},[h])]):null}}}),M=e=>{const{componentCls:i,iconCls:c}=e;return{[i]:t._extends(t._extends({},t.resetComponent(e)),{color:e.breadcrumbBaseColor,fontSize:e.breadcrumbFontSize,[c]:{fontSize:e.breadcrumbIconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:t._extends({color:e.breadcrumbLinkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${e.paddingXXS}px`,borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",marginInline:-e.marginXXS,"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover}},t.genFocusStyle(e)),"li:last-child":{color:e.breadcrumbLastItemColor,[`& > ${i}-separator`]:{display:"none"}},[`${i}-separator`]:{marginInline:e.breadcrumbSeparatorMargin,color:e.breadcrumbSeparatorColor},[`${i}-link`]:{[`
          > ${c} + span,
          > ${c} + a
        `]:{marginInlineStart:e.marginXXS}},[`${i}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",padding:`0 ${e.paddingXXS}px`,marginInline:-e.marginXXS,[`> ${c}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover,a:{color:e.breadcrumbLinkColorHover}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},E=t.genComponentStyleHook("Breadcrumb",e=>{const i=t.merge(e,{breadcrumbBaseColor:e.colorTextDescription,breadcrumbFontSize:e.fontSize,breadcrumbIconFontSize:e.fontSize,breadcrumbLinkColor:e.colorTextDescription,breadcrumbLinkColorHover:e.colorText,breadcrumbLastItemColor:e.colorText,breadcrumbSeparatorMargin:e.marginXS,breadcrumbSeparatorColor:e.colorTextDescription});return[M(i)]}),w=()=>({prefixCls:String,routes:{type:Array},params:t.PropTypes.any,separator:t.PropTypes.any,itemRender:{type:Function}});function V(e,i){if(!e.breadcrumbName)return null;const c=Object.keys(i).join("|");return e.breadcrumbName.replace(new RegExp(`:(${c})`,"g"),(u,m)=>i[m]||u)}function k(e){const{route:i,params:c,routes:o,paths:u}=e,m=o.indexOf(i)===o.length-1,S=V(i,c);return m?r.createVNode("span",null,[S]):r.createVNode("a",{href:`#/${u.join("/")}`},[S])}const x=r.defineComponent({compatConfig:{MODE:3},name:"ABreadcrumb",inheritAttrs:!1,props:w(),slots:Object,setup(e,i){let{slots:c,attrs:o}=i;const{prefixCls:u,direction:m}=t.useConfigInject("breadcrumb",e),[S,v]=E(u),b=(s,l)=>(s=(s||"").replace(/^\//,""),Object.keys(l).forEach(a=>{s=s.replace(`:${a}`,l[a])}),s),h=(s,l,a)=>{const n=[...s],d=b(l||"",a);return d&&n.push(d),n},g=s=>{let{routes:l=[],params:a={},separator:n,itemRender:d=k}=s;const p=[];return l.map(f=>{const y=b(f.path,a);y&&p.push(y);const C=[...p];let _=null;f.children&&f.children.length&&(_=r.createVNode(t.Menu,{items:f.children.map(B=>({key:B.path||B.breadcrumbName,label:d({route:B,params:a,routes:l,paths:h(C,B.path,a)})}))},null));const P={separator:n};return _&&(P.overlay=_),r.createVNode(N,t._objectSpread2(t._objectSpread2({},P),{},{key:y||f.breadcrumbName}),{default:()=>[d({route:f,params:a,routes:l,paths:C})]})})};return()=>{var s;let l;const{routes:a,params:n={}}=e,d=t.flattenChildren(t.getPropsSlot(c,e)),p=(s=t.getPropsSlot(c,e,"separator"))!==null&&s!==void 0?s:"/",f=e.itemRender||c.itemRender||k;a&&a.length>0?l=g({routes:a,params:n,separator:p,itemRender:f}):d.length&&(l=d.map((C,_)=>(t.warning(typeof C.type=="object"&&(C.type.__ANT_BREADCRUMB_ITEM||C.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),r.cloneVNode(C,{separator:p,key:_}))));const y={[u.value]:!0,[`${u.value}-rtl`]:m.value==="rtl",[`${o.class}`]:!!o.class,[v.value]:!0};return S(r.createVNode("nav",t._objectSpread2(t._objectSpread2({},o),{},{class:y}),[r.createVNode("ol",null,[l])]))}}});var D=function(e,i){var c={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(c[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)i.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(c[o[u]]=e[o[u]]);return c};const z=()=>({prefixCls:String}),O=r.defineComponent({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:z(),setup(e,i){let{slots:c,attrs:o}=i;const{prefixCls:u}=t.useConfigInject("breadcrumb",e);return()=>{var m;const{separator:S,class:v}=o,b=D(o,["separator","class"]),h=t.flattenChildren((m=c.default)===null||m===void 0?void 0:m.call(c));return r.createVNode("span",t._objectSpread2({class:[`${u.value}-separator`,v]},b),[h.length>0?h:"/"])}}});x.Item=N;x.Separator=O;x.install=function(e){return e.component(x.name,x),e.component(N.name,N),e.component(O.name,O),e};const L={key:1},X={key:1},I=r.defineComponent({name:"LayoutBreadcrumb",__name:"Breadcrumb",props:{theme:t.propTypes.oneOf(["dark","light"])},setup(e){const i=r.ref([]),{currentRoute:c}=t.useRouter(),{prefixCls:o}=t.useDesign("layout-breadcrumb"),{getShowBreadCrumbIcon:u}=j.useRootSetting(),m=$.useGo();r.watchEffect(async()=>{var C,_,P,B;if(c.value.name===t.REDIRECT_NAME)return;const s=await t.getMenus(),l=c.value.matched,a=l==null?void 0:l[l.length-1];let n=c.value.path;a&&((C=a==null?void 0:a.meta)!=null&&C.currentActiveMenu)&&(n=a.meta.currentActiveMenu);const d=t.getAllParentPath(s,n),p=s.filter(R=>R.path===d[0]),f=S(p,d);if(!f||f.length===0){i.value=[];return}const y=v(f);(_=c.value.meta)!=null&&_.currentActiveMenu&&!((P=c.value.meta)!=null&&P.hideBreadcrumb)&&y.push({...c.value,name:((B=c.value.meta)==null?void 0:B.title)||c.value.name}),i.value=y});function S(s,l){const a=[];return s.forEach(n=>{var d,p;l.includes(n.path)&&a.push({...n,name:((d=n.meta)==null?void 0:d.title)||n.name}),(p=n.children)!=null&&p.length&&a.push(...S(n.children,l))}),a}function v(s){return t.filter(s,l=>{const{meta:a,name:n}=l;if(!a)return!!n;const{title:d,hideBreadcrumb:p,hideMenu:f}=a;return!(!d||p||f)}).filter(l=>{var a;return!((a=l.meta)!=null&&a.hideBreadcrumb)})}function b(s){const{children:l,redirect:a,meta:n}=s;if(!(l!=null&&l.length&&!a)&&!(n!=null&&n.carryParam))if(a&&t.isString(a))m(a);else{let d="";s.path?d=s.path:d="",d=/^\//.test(d)?d:`/${d}`,m(d)}}function h(s,l){return s.indexOf(l)!==s.length-1}function g(s){var l;return s.icon||((l=s.meta)==null?void 0:l.icon)}return(s,l)=>{const a=r.resolveComponent("router-link");return r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass([r.unref(o),`${r.unref(o)}--${e.theme}`])},[r.createVNode(r.unref(x),null,{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(i.value,n=>{var d;return r.openBlock(),r.createBlock(r.unref(N),{key:n.name},r.createSlots({default:r.withCtx(()=>[r.unref(u)&&g(n)?(r.openBlock(),r.createBlock(t._sfc_main,{key:0,icon:g(n)},null,8,["icon"])):r.createCommentVNode("",!0),h(i.value,n)?(r.openBlock(),r.createBlock(a,{key:2,to:"",onClick:p=>b(n)},{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(n.meta.title||n.name),1)]),_:2},1032,["onClick"])):(r.openBlock(),r.createElementBlock("span",L,r.toDisplayString(n.meta.title||n.name),1))]),_:2},[n.children&&!((d=n.meta)!=null&&d.hideChildrenInMenu)?{name:"overlay",fn:r.withCtx(()=>[r.createVNode(r.unref(t.Menu),null,{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(n.children,p=>(r.openBlock(),r.createBlock(r.unref(t.MenuItem),{key:p.name},{default:r.withCtx(()=>{var f;return[r.unref(u)&&g(p)?(r.openBlock(),r.createBlock(t._sfc_main,{key:0,icon:g(p)},null,8,["icon"])):r.createCommentVNode("",!0),h(i.value,p)?(r.openBlock(),r.createBlock(a,{key:2,to:"",onClick:y=>b(p)},{default:r.withCtx(()=>{var y;return[r.createTextVNode(r.toDisplayString(((y=p.meta)==null?void 0:y.title)||p.name),1)]}),_:2},1032,["onClick"])):(r.openBlock(),r.createElementBlock("span",X,r.toDisplayString(((f=p.meta)==null?void 0:f.title)||p.name),1))]}),_:2},1024))),128))]),_:2},1024)]),key:"0"}:void 0]),1024)}),128))]),_:1})],2)}}});exports.default=I;
