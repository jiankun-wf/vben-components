"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),t=require("./components.js"),y=require("./usePage.js"),u=require("./index2.js"),S=require("./AppDarkModeToggle.js"),C=require("./CopyOutlined.js");function x(s,r="已成功复制到剪切板!"){return navigator.clipboard?navigator.clipboard.writeText(s).then(()=>{r&&t.api.success(r)}).catch(n=>(t.api.error("复制失败!"+n.message),n)):Reflect.has(document,"execCommand")?new Promise((n,a)=>{try{const o=document.createElement("textarea");o.value=s,o.style.width="0",o.style.position="fixed",o.style.left="-999px",o.style.top="10px",o.setAttribute("readonly","readonly"),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),r&&t.api.success(r),n()}catch(o){t.api.error("复制失败!"+o.message),a(o)}}):Promise.reject('"navigator.clipboard" 或 "document.execCommand" 中存在API错误, 拷贝失败!')}const h=e.defineComponent({name:"SettingFooter",__name:"SettingFooter",setup(s){const r=t.usePermissionStore(),{prefixCls:n}=t.useDesign("setting-footer"),{createSuccessModal:a,createMessage:o}=t.useMessage(),d=y.useMultipleTabStore(),p=t.useUserStore(),i=t.useAppStore();function f(){x(JSON.stringify(e.unref(i.getProjectConfig),null,2),null).then(()=>{a({title:"操作成功",content:"复制成功,请到 src/settings/projectSetting.ts 中修改配置！"})})}function g(){try{i.setProjectConfig(t.setting);const{colorWeak:c,grayMode:l}=t.setting;S.updateSidebarBgColor(),u.updateColorWeak(c),u.updateGrayMode(l),o.success("重置成功！")}catch(c){o.error(c)}}function m(){localStorage.clear(),i.resetAllState(),r.resetState(),d.resetState(),p.resetState(),location.reload()}return(c,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(n))},[e.createVNode(e.unref(t.Button),{type:"primary",block:"",onClick:f},{default:e.withCtx(()=>[e.createVNode(e.unref(C.CopyOutlined),{class:"mr-2"}),e.createTextVNode(" 拷贝 ")]),_:1}),e.createVNode(e.unref(t.Button),{color:"warning",block:"",onClick:g,class:"my-3"},{default:e.withCtx(()=>[e.createVNode(e.unref(t.RedoOutlined),{class:"mr-2"}),e.createTextVNode(" 重置 ")]),_:1}),e.createVNode(e.unref(t.Button),{color:"error",block:"",onClick:m},{default:e.withCtx(()=>[e.createVNode(e.unref(t.RedoOutlined),{class:"mr-2"}),e.createTextVNode(" 清除 ")]),_:1})],2))}}),_=t._export_sfc(h,[["__scopeId","data-v-2932af64"]]);exports.default=_;
